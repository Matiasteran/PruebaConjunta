Ö
qC:\Users\matia\OneDrive\Escritorio\Prueba_Conjunta\PruebaConjunta\Gestion PruebaFinal\GestionProyectos\Program.cs
var 
builder 
= 
WebApplication 
. 
CreateBuilder *
(* +
args+ /
)/ 0
;0 1
Env 
. 
Load 
( 	
)	 

;
 
var		 
dbServer		 
=		 
Environment		 
.		 "
GetEnvironmentVariable		 1
(		1 2
$str		2 =
)		= >
;		> ?
var

 

dbDatabase

 
=

 
Environment

 
.

 "
GetEnvironmentVariable

 3
(

3 4
$str

4 A
)

A B
;

B C
var 
dbUser 

= 
Environment 
. "
GetEnvironmentVariable /
(/ 0
$str0 9
)9 :
;: ;
var 

dbPassword 
= 
Environment 
. "
GetEnvironmentVariable 3
(3 4
$str4 A
)A B
;B C
var 
connectionString 
= 
$" 
$str  
{  !
dbServer! )
}) *
$str* +
"+ ,
+- .
$" 
$str "
{" #

dbDatabase# -
}- .
$str. /
"/ 0
+1 2
$" 
$str !
{! "
dbUser" (
}( )
$str) *
"* +
+, -
$" 
$str "
{" #

dbPassword# -
}- .
$str. /
"/ 0
+1 2
$" 
$str S
"S T
;T U
builder 
. 
Configuration 
[ 
$str ;
]; <
== >
connectionString? O
;O P
builder 
. 
Services 
. 
AddControllers 
(  
)  !
;! "
builder 
. 
Services 
. #
AddEndpointsApiExplorer (
(( )
)) *
;* +
builder 
. 
Services 
. 
AddSwaggerGen 
( 
)  
;  !
builder 
. 
Services 
. 
AddDbContext 
< 
AppDBContext *
>* +
(+ ,
options, 3
=>4 6
options7 >
.> ?
UseSqlServer? K
(K L
builderL S
.S T
ConfigurationT a
.a b
GetConnectionStringb u
(u v
$str	v â
)
â ä
)
ä ã
)
ã å
;
å ç
var 
app 
= 	
builder
 
. 
Build 
( 
) 
; 
app 
. 
Environment 
. 
IsDevelopment 
( 
) 
;  
app   
.   

UseSwagger   
(   
)   
;   
app!! 
.!! 
UseSwaggerUI!! 
(!! 
)!! 
;!! 
app$$ 
.$$ 
UseHttpsRedirection$$ 
($$ 
)$$ 
;$$ 
app%% 
.%% 
UseAuthorization%% 
(%% 
)%% 
;%% 
app&& 
.&& 
MapControllers&& 
(&& 
)&& 
;&& 
await'' 
app'' 	
.''	 

RunAsync''
 
('' 
)'' 
;'' œa
êC:\Users\matia\OneDrive\Escritorio\Prueba_Conjunta\PruebaConjunta\Gestion PruebaFinal\GestionProyectos\Migrations\20250123164018_InitalCreate.cs
	namespace 	
prueba
 
. 

Migrations 
{ 
public		 

partial		 
class		 
InitalCreate		 %
:		& '
	Migration		( 1
{

 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str $
,$ %
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
int& )
>) *
(* +
type+ /
:/ 0
$str1 6
,6 7
nullable8 @
:@ A
falseB G
)G H
. 

Annotation #
(# $
$str$ 8
,8 9
$str: @
)@ A
,A B
Numero 
= 
table "
." #
Column# )
<) *
int* -
>- .
(. /
type/ 3
:3 4
$str5 :
,: ;
nullable< D
:D E
falseF K
)K L
,L M
Piso 
= 
table  
.  !
Column! '
<' (
int( +
>+ ,
(, -
type- 1
:1 2
$str3 8
,8 9
nullable: B
:B C
falseD I
)I J
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% 6
,6 7
x8 9
=>: <
x= >
.> ?
Id? A
)A B
;B C
} 
) 
; 
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str 
,  
columns 
: 
table 
=> !
new" %
{ 
Id   
=   
table   
.   
Column   %
<  % &
int  & )
>  ) *
(  * +
type  + /
:  / 0
$str  1 6
,  6 7
nullable  8 @
:  @ A
false  B G
)  G H
.!! 

Annotation!! #
(!!# $
$str!!$ 8
,!!8 9
$str!!: @
)!!@ A
,!!A B
Nombre"" 
="" 
table"" "
.""" #
Column""# )
<"") *
string""* 0
>""0 1
(""1 2
type""2 6
:""6 7
$str""8 G
,""G H
nullable""I Q
:""Q R
false""S X
)""X Y
,""Y Z
Apellido## 
=## 
table## $
.##$ %
Column##% +
<##+ ,
string##, 2
>##2 3
(##3 4
type##4 8
:##8 9
$str##: I
,##I J
nullable##K S
:##S T
false##U Z
)##Z [
,##[ \
Especialidad$$  
=$$! "
table$$# (
.$$( )
Column$$) /
<$$/ 0
string$$0 6
>$$6 7
($$7 8
type$$8 <
:$$< =
$str$$> M
,$$M N
nullable$$O W
:$$W X
false$$Y ^
)$$^ _
}%% 
,%% 
constraints&& 
:&& 
table&& "
=>&&# %
{'' 
table(( 
.(( 

PrimaryKey(( $
((($ %
$str((% 1
,((1 2
x((3 4
=>((5 7
x((8 9
.((9 :
Id((: <
)((< =
;((= >
})) 
))) 
;)) 
migrationBuilder++ 
.++ 
CreateTable++ (
(++( )
name,, 
:,, 
$str,, !
,,,! "
columns-- 
:-- 
table-- 
=>-- !
new--" %
{.. 
Id// 
=// 
table// 
.// 
Column// %
<//% &
int//& )
>//) *
(//* +
type//+ /
:/// 0
$str//1 6
,//6 7
nullable//8 @
://@ A
false//B G
)//G H
.00 

Annotation00 #
(00# $
$str00$ 8
,008 9
$str00: @
)00@ A
,00A B
Nombre11 
=11 
table11 "
.11" #
Column11# )
<11) *
string11* 0
>110 1
(111 2
type112 6
:116 7
$str118 G
,11G H
nullable11I Q
:11Q R
false11S X
)11X Y
,11Y Z
Apellido22 
=22 
table22 $
.22$ %
Column22% +
<22+ ,
string22, 2
>222 3
(223 4
type224 8
:228 9
$str22: I
,22I J
nullable22K S
:22S T
false22U Z
)22Z [
,22[ \
FechaNacimiento33 #
=33$ %
table33& +
.33+ ,
Column33, 2
<332 3
DateTime333 ;
>33; <
(33< =
type33= A
:33A B
$str33C N
,33N O
nullable33P X
:33X Y
false33Z _
)33_ `
,33` a
Email44 
=44 
table44 !
.44! "
Column44" (
<44( )
string44) /
>44/ 0
(440 1
type441 5
:445 6
$str447 F
,44F G
nullable44H P
:44P Q
false44R W
)44W X
}55 
,55 
constraints66 
:66 
table66 "
=>66# %
{77 
table88 
.88 

PrimaryKey88 $
(88$ %
$str88% 3
,883 4
x885 6
=>887 9
x88: ;
.88; <
Id88< >
)88> ?
;88? @
}99 
)99 
;99 
migrationBuilder;; 
.;; 
CreateTable;; (
(;;( )
name<< 
:<< 
$str<< 
,<< 
columns== 
:== 
table== 
=>== !
new==" %
{>> 
Id?? 
=?? 
table?? 
.?? 
Column?? %
<??% &
int??& )
>??) *
(??* +
type??+ /
:??/ 0
$str??1 6
,??6 7
nullable??8 @
:??@ A
false??B G
)??G H
.@@ 

Annotation@@ #
(@@# $
$str@@$ 8
,@@8 9
$str@@: @
)@@@ A
,@@A B

PacienteIdAA 
=AA  
tableAA! &
.AA& '
ColumnAA' -
<AA- .
intAA. 1
>AA1 2
(AA2 3
typeAA3 7
:AA7 8
$strAA9 >
,AA> ?
nullableAA@ H
:AAH I
falseAAJ O
)AAO P
,AAP Q
MedicoIdBB 
=BB 
tableBB $
.BB$ %
ColumnBB% +
<BB+ ,
intBB, /
>BB/ 0
(BB0 1
typeBB1 5
:BB5 6
$strBB7 <
,BB< =
nullableBB> F
:BBF G
falseBBH M
)BBM N
,BBN O
FechaCC 
=CC 
tableCC !
.CC! "
ColumnCC" (
<CC( )
DateTimeCC) 1
>CC1 2
(CC2 3
typeCC3 7
:CC7 8
$strCC9 D
,CCD E
nullableCCF N
:CCN O
falseCCP U
)CCU V
,CCV W
HoraDD 
=DD 
tableDD  
.DD  !
ColumnDD! '
<DD' (
TimeSpanDD( 0
>DD0 1
(DD1 2
typeDD2 6
:DD6 7
$strDD8 >
,DD> ?
nullableDD@ H
:DDH I
falseDDJ O
)DDO P
,DDP Q
ConsultorioIdEE !
=EE" #
tableEE$ )
.EE) *
ColumnEE* 0
<EE0 1
intEE1 4
>EE4 5
(EE5 6
typeEE6 :
:EE: ;
$strEE< A
,EEA B
nullableEEC K
:EEK L
falseEEM R
)EER S
}FF 
,FF 
constraintsGG 
:GG 
tableGG "
=>GG# %
{HH 
tableII 
.II 

PrimaryKeyII $
(II$ %
$strII% /
,II/ 0
xII1 2
=>II3 5
xII6 7
.II7 8
IdII8 :
)II: ;
;II; <
tableJJ 
.JJ 

ForeignKeyJJ $
(JJ$ %
nameKK 
:KK 
$strKK C
,KKC D
columnLL 
:LL 
xLL  !
=>LL" $
xLL% &
.LL& '
ConsultorioIdLL' 4
,LL4 5
principalTableMM &
:MM& '
$strMM( 6
,MM6 7
principalColumnNN '
:NN' (
$strNN) -
,NN- .
onDeleteOO  
:OO  !
ReferentialActionOO" 3
.OO3 4
CascadeOO4 ;
)OO; <
;OO< =
tablePP 
.PP 

ForeignKeyPP $
(PP$ %
nameQQ 
:QQ 
$strQQ 9
,QQ9 :
columnRR 
:RR 
xRR  !
=>RR" $
xRR% &
.RR& '
MedicoIdRR' /
,RR/ 0
principalTableSS &
:SS& '
$strSS( 1
,SS1 2
principalColumnTT '
:TT' (
$strTT) -
,TT- .
onDeleteUU  
:UU  !
ReferentialActionUU" 3
.UU3 4
CascadeUU4 ;
)UU; <
;UU< =
tableVV 
.VV 

ForeignKeyVV $
(VV$ %
nameWW 
:WW 
$strWW =
,WW= >
columnXX 
:XX 
xXX  !
=>XX" $
xXX% &
.XX& '

PacienteIdXX' 1
,XX1 2
principalTableYY &
:YY& '
$strYY( 3
,YY3 4
principalColumnZZ '
:ZZ' (
$strZZ) -
,ZZ- .
onDelete[[  
:[[  !
ReferentialAction[[" 3
.[[3 4
Cascade[[4 ;
)[[; <
;[[< =
}\\ 
)\\ 
;\\ 
migrationBuilder^^ 
.^^ 
CreateIndex^^ (
(^^( )
name__ 
:__ 
$str__ .
,__. /
table`` 
:`` 
$str`` 
,`` 
columnaa 
:aa 
$straa '
)aa' (
;aa( )
migrationBuildercc 
.cc 
CreateIndexcc (
(cc( )
namedd 
:dd 
$strdd )
,dd) *
tableee 
:ee 
$stree 
,ee 
columnff 
:ff 
$strff "
)ff" #
;ff# $
migrationBuilderhh 
.hh 
CreateIndexhh (
(hh( )
nameii 
:ii 
$strii +
,ii+ ,
tablejj 
:jj 
$strjj 
,jj 
columnkk 
:kk 
$strkk $
)kk$ %
;kk% &
}ll 	
	protectedoo 
overrideoo 
voidoo 
Downoo  $
(oo$ %
MigrationBuilderoo% 5
migrationBuilderoo6 F
)ooF G
{pp 	
migrationBuilderqq 
.qq 
	DropTableqq &
(qq& '
namerr 
:rr 
$strrr 
)rr 
;rr 
migrationBuildertt 
.tt 
	DropTablett &
(tt& '
nameuu 
:uu 
$struu $
)uu$ %
;uu% &
migrationBuilderww 
.ww 
	DropTableww &
(ww& '
namexx 
:xx 
$strxx 
)xx  
;xx  !
migrationBuilderzz 
.zz 
	DropTablezz &
(zz& '
name{{ 
:{{ 
$str{{ !
){{! "
;{{" #
}|| 	
}}} 
}~~ ËV
àC:\Users\matia\OneDrive\Escritorio\Prueba_Conjunta\PruebaConjunta\Gestion PruebaFinal\GestionProyectos\Controllers\PacienteController.cs
	namespace 	
prueba
 
. 
Controllers 
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public		 

class		 
PacienteController		 #
:		$ %
ControllerBase		& 4
{

 
private 
readonly 
AppDBContext %
_appDbContext& 3
;3 4
public 
PacienteController !
(! "
AppDBContext" .
appDbContext/ ;
); <
{ 	
_appDbContext 
= 
appDbContext (
;( )
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
GetPacientes) 5
(5 6
)6 7
{ 	
var 
	pacientes 
= 
await !
_appDbContext" /
./ 0
	Pacientes0 9
.9 :
ToListAsync: E
(E F
)F G
;G H
return 
Ok 
( 
	pacientes 
)  
;  !
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
async 
Task 
< 
IActionResult '
>' (
GetPaciente) 4
(4 5
int5 8
id9 ;
); <
{ 	
var 
paciente 
= 
await  
_appDbContext! .
.. /
	Pacientes/ 8
.8 9
	FindAsync9 B
(B C
idC E
)E F
;F G
if 
( 
paciente 
== 
null  
)  !
return" (
Ok) +
(+ ,
$str, C
)C D
;D E
return 
Ok 
( 
paciente 
) 
;  
} 	
private!! 
static!! 
string!! 
ValidarPaciente!! -
(!!- .
Paciente!!. 6
paciente!!7 ?
)!!? @
{"" 	
if## 
(## 
string## 
.## 
IsNullOrWhiteSpace## )
(##) *
paciente##* 2
.##2 3
Nombre##3 9
)##9 :
)##: ;
{$$ 
return%% 
$str%% 1
;%%1 2
}&& 
if'' 
('' 
!'' 
paciente'' 
.'' 
Nombre''  
.''  !
All''! $
(''$ %
char''% )
.'') *
IsLetter''* 2
)''2 3
)''3 4
{(( 
return)) 
$str)) <
;))< =
}** 
if,, 
(,, 
string,, 
.,, 
IsNullOrWhiteSpace,, )
(,,) *
paciente,,* 2
.,,2 3
Apellido,,3 ;
),,; <
),,< =
{-- 
return.. 
$str.. 3
;..3 4
}// 
if00 
(00 
!00 
paciente00 
.00 
Apellido00 "
.00" #
All00# &
(00& '
char00' +
.00+ ,
IsLetter00, 4
)004 5
)005 6
{11 
return22 
$str22 >
;22> ?
}33 
if55 
(55 
paciente55 
.55 
FechaNacimiento55 (
==55) +
default55, 3
)553 4
{66 
return77 
$str77 >
;77> ?
}88 
if99 
(99 
paciente99 
.99 
FechaNacimiento99 (
>99) *
DateTime99+ 3
.993 4
Now994 7
)997 8
{:: 
return;; 
$str;; I
;;;I J
}<< 
if>> 
(>> 
string>> 
.>> 
IsNullOrWhiteSpace>> )
(>>) *
paciente>>* 2
.>>2 3
Email>>3 8
)>>8 9
||>>: <
!>>= >
paciente>>> F
.>>F G
Email>>G L
.>>L M
Contains>>M U
(>>U V
$str>>V Y
)>>Y Z
)>>Z [
{?? 
return@@ 
$str@@ B
;@@B C
}AA 
returnCC 
$strCC 
;CC 
}DD 	
[FF 	
HttpPostFF	 
]FF 
publicGG 
asyncGG 
TaskGG 
<GG 
IActionResultGG '
>GG' (
CreatePacienteGG) 7
(GG7 8
PacienteGG8 @
pacienteGGA I
)GGI J
{HH 	
varII 
errorII 
=II 
ValidarPacienteII '
(II' (
pacienteII( 0
)II0 1
;II1 2
ifJJ 
(JJ 
errorJJ 
!=JJ 
$strJJ 
)JJ 
{KK 
returnLL 
OkLL 
(LL 
errorLL 
)LL  
;LL  !
}MM 
varOO 
pacienteExistenteOO !
=OO" #
awaitOO$ )
_appDbContextOO* 7
.OO7 8
	PacientesOO8 A
.OOA B
FirstOrDefaultAsyncOOB U
(OOU V
pOOV W
=>OOX Z
pOO[ \
.OO\ ]
EmailOO] b
==OOc e
pacienteOOf n
.OOn o
EmailOOo t
)OOt u
;OOu v
ifPP 
(PP 
pacienteExistentePP !
!=PP" $
nullPP% )
)PP) *
{QQ 
returnRR 
OkRR 
(RR 
$strRR D
)RRD E
;RRE F
}SS 
_appDbContextUU 
.UU 
	PacientesUU #
.UU# $
AddUU$ '
(UU' (
pacienteUU( 0
)UU0 1
;UU1 2
awaitVV 
_appDbContextVV 
.VV  
SaveChangesAsyncVV  0
(VV0 1
)VV1 2
;VV2 3
returnWW 
OkWW 
(WW 
pacienteWW 
)WW 
;WW  
}XX 	
[ZZ 	
HttpPutZZ	 
(ZZ 
$strZZ 
)ZZ 
]ZZ 
public[[ 
async[[ 
Task[[ 
<[[ 
IActionResult[[ '
>[[' (
EditPaciente[[) 5
([[5 6
int[[6 9
id[[: <
,[[< =
Paciente[[> F
paciente[[G O
)[[O P
{\\ 	
if]] 
(]] 
id]] 
!=]] 
paciente]] 
.]] 
Id]] !
)]]! "
return]]# )
Ok]]* ,
(]], -
$str]]- M
)]]M N
;]]N O
var__ 
pacienteExistente__ !
=__" #
await__$ )
_appDbContext__* 7
.__7 8
	Pacientes__8 A
.__A B
	FindAsync__B K
(__K L
id__L N
)__N O
;__O P
if`` 
(`` 
pacienteExistente`` !
==``" $
null``% )
)``) *
return``+ 1
Ok``2 4
(``4 5
$str``5 L
)``L M
;``M N
varbb 
errorbb 
=bb 
ValidarPacientebb '
(bb' (
pacientebb( 0
)bb0 1
;bb1 2
ifcc 
(cc 
errorcc 
!=cc 
$strcc 
)cc 
{dd 
returnee 
Okee 
(ee 
erroree 
)ee  
;ee  !
}ff 
varhh 
pacienteConEmailhh  
=hh! "
awaithh# (
_appDbContexthh) 6
.hh6 7
	Pacienteshh7 @
.hh@ A
FirstOrDefaultAsynchhA T
(hhT U
phhU V
=>hhW Y
phhZ [
.hh[ \
Emailhh\ a
==hhb d
pacientehhe m
.hhm n
Emailhhn s
&&hht v
phhw x
.hhx y
Idhhy {
!=hh| ~
id	hh Å
)
hhÅ Ç
;
hhÇ É
ifii 
(ii 
pacienteConEmailii  
!=ii! #
nullii$ (
)ii( )
{jj 
returnkk 
Okkk 
(kk 
$strkk F
)kkF G
;kkG H
}ll 
pacienteExistentenn 
.nn 
Nombrenn $
=nn% &
pacientenn' /
.nn/ 0
Nombrenn0 6
;nn6 7
pacienteExistenteoo 
.oo 
Apellidooo &
=oo' (
pacienteoo) 1
.oo1 2
Apellidooo2 :
;oo: ;
pacienteExistentepp 
.pp 
FechaNacimientopp -
=pp. /
pacientepp0 8
.pp8 9
FechaNacimientopp9 H
;ppH I
pacienteExistenteqq 
.qq 
Emailqq #
=qq$ %
pacienteqq& .
.qq. /
Emailqq/ 4
;qq4 5
_appDbContextss 
.ss 
	Pacientesss #
.ss# $
Updatess$ *
(ss* +
pacienteExistentess+ <
)ss< =
;ss= >
awaittt 
_appDbContexttt 
.tt  
SaveChangesAsynctt  0
(tt0 1
)tt1 2
;tt2 3
returnvv 
Okvv 
(vv 
pacienteExistentevv '
)vv' (
;vv( )
}ww 	
[yy 	

HttpDeleteyy	 
(yy 
$stryy 
)yy 
]yy 
publiczz 
asynczz 
Taskzz 
<zz 
IActionResultzz '
>zz' (
DeletePacientezz) 7
(zz7 8
intzz8 ;
idzz< >
)zz> ?
{{{ 	
var|| 
paciente|| 
=|| 
await||  
_appDbContext||! .
.||. /
	Pacientes||/ 8
.||8 9
	FindAsync||9 B
(||B C
id||C E
)||E F
;||F G
if}} 
(}} 
paciente}} 
==}} 
null}}  
)}}  !
return}}" (
Ok}}) +
(}}+ ,
$str}}, C
)}}C D
;}}D E
_appDbContext 
. 
	Pacientes #
.# $
Remove$ *
(* +
paciente+ 3
)3 4
;4 5
await
ÄÄ 
_appDbContext
ÄÄ 
.
ÄÄ  
SaveChangesAsync
ÄÄ  0
(
ÄÄ0 1
)
ÄÄ1 2
;
ÄÄ2 3
return
ÇÇ 
Ok
ÇÇ 
(
ÇÇ 
new
ÇÇ 
{
ÇÇ 
message
ÇÇ #
=
ÇÇ$ %
$"
ÇÇ& (
$str
ÇÇ( 8
{
ÇÇ8 9
id
ÇÇ9 ;
}
ÇÇ; <
$str
ÇÇ< \
"
ÇÇ\ ]
}
ÇÇ^ _
)
ÇÇ_ `
;
ÇÇ` a
}
ÉÉ 	
}
ÑÑ 
}ÖÖ ÔQ
ÜC:\Users\matia\OneDrive\Escritorio\Prueba_Conjunta\PruebaConjunta\Gestion PruebaFinal\GestionProyectos\Controllers\MedicoController.cs
	namespace 	
prueba
 
. 
Controllers 
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public		 

class		 
MedicoController		 !
:		" #
ControllerBase		$ 2
{

 
private 
readonly 
AppDBContext %
_appDbContext& 3
;3 4
public 
MedicoController 
(  
AppDBContext  ,
appDbContext- 9
)9 :
{ 	
_appDbContext 
= 
appDbContext (
;( )
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IActionResult '
>' (

GetMedicos) 3
(3 4
)4 5
{ 	
var 
medicos 
= 
await 
_appDbContext  -
.- .
Medicos. 5
.5 6
ToListAsync6 A
(A B
)B C
;C D
return 
Ok 
( 
medicos 
) 
; 
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
async 
Task 
< 
IActionResult '
>' (
	GetMedico) 2
(2 3
int3 6
id7 9
)9 :
{ 	
var 
medico 
= 
await 
_appDbContext ,
., -
Medicos- 4
.4 5
	FindAsync5 >
(> ?
id? A
)A B
;B C
if 
( 
medico 
== 
null 
) 
return  &
Ok' )
() *
$str* ?
)? @
;@ A
return 
Ok 
( 
medico 
) 
; 
} 	
private!! 
static!! 
string!! 
ValidarMedico!! +
(!!+ ,
Medico!!, 2
medico!!3 9
)!!9 :
{"" 	
if## 
(## 
string## 
.## 
IsNullOrWhiteSpace## )
(##) *
medico##* 0
.##0 1
Nombre##1 7
)##7 8
)##8 9
{$$ 
return%% 
$str%% 1
;%%1 2
}&& 
if'' 
('' 
!'' 
medico'' 
.'' 
Nombre'' 
.'' 
All'' "
(''" #
char''# '
.''' (
IsLetter''( 0
)''0 1
)''1 2
{(( 
return)) 
$str)) <
;))< =
}** 
if,, 
(,, 
string,, 
.,, 
IsNullOrWhiteSpace,, )
(,,) *
medico,,* 0
.,,0 1
Apellido,,1 9
),,9 :
),,: ;
{-- 
return.. 
$str.. 3
;..3 4
}// 
if00 
(00 
!00 
medico00 
.00 
Apellido00  
.00  !
All00! $
(00$ %
char00% )
.00) *
IsLetter00* 2
)002 3
)003 4
{11 
return22 
$str22 >
;22> ?
}33 
if55 
(55 
string55 
.55 
IsNullOrWhiteSpace55 )
(55) *
medico55* 0
.550 1
Especialidad551 =
)55= >
)55> ?
{66 
return77 
$str77 7
;777 8
}88 
return:: 
$str:: 
;:: 
};; 	
[== 	
HttpPost==	 
]== 
public>> 
async>> 
Task>> 
<>> 
IActionResult>> '
>>>' (
CreateMedico>>) 5
(>>5 6
Medico>>6 <
medico>>= C
)>>C D
{?? 	
var@@ 
error@@ 
=@@ 
ValidarMedico@@ %
(@@% &
medico@@& ,
)@@, -
;@@- .
ifAA 
(AA 
errorAA 
!=AA 
$strAA 
)AA 
{BB 
returnCC 
OkCC 
(CC 
errorCC 
)CC  
;CC  !
}DD 
varFF 
medicoExistenteFF 
=FF  !
awaitFF" '
_appDbContextFF( 5
.FF5 6
MedicosFF6 =
.FF= >
FirstOrDefaultAsyncFF> Q
(FFQ R
mFFR S
=>FFT V
mFFW X
.FFX Y
NombreFFY _
==FF` b
medicoFFc i
.FFi j
NombreFFj p
&&FFq s
mFFt u
.FFu v
ApellidoFFv ~
==	FF Å
medico
FFÇ à
.
FFà â
Apellido
FFâ ë
&&
FFí î
m
FFï ñ
.
FFñ ó
Especialidad
FFó £
==
FF§ ¶
medico
FFß ≠
.
FF≠ Æ
Especialidad
FFÆ ∫
)
FF∫ ª
;
FFª º
ifGG 
(GG 
medicoExistenteGG 
!=GG  "
nullGG# '
)GG' (
{HH 
returnII 
OkII 
(II 
$strII R
)IIR S
;IIS T
}JJ 
_appDbContextLL 
.LL 
MedicosLL !
.LL! "
AddLL" %
(LL% &
medicoLL& ,
)LL, -
;LL- .
awaitMM 
_appDbContextMM 
.MM  
SaveChangesAsyncMM  0
(MM0 1
)MM1 2
;MM2 3
returnNN 
OkNN 
(NN 
medicoNN 
)NN 
;NN 
}OO 	
[QQ 	
HttpPutQQ	 
(QQ 
$strQQ 
)QQ 
]QQ 
publicRR 
asyncRR 
TaskRR 
<RR 
IActionResultRR '
>RR' (

EditMedicoRR) 3
(RR3 4
intRR4 7
idRR8 :
,RR: ;
MedicoRR< B
medicoRRC I
)RRI J
{SS 	
ifTT 
(TT 
idTT 
!=TT 
medicoTT 
.TT 
IdTT 
)TT  
returnTT! '
OkTT( *
(TT* +
$strTT+ I
)TTI J
;TTJ K
varVV 
medicoExistenteVV 
=VV  !
awaitVV" '
_appDbContextVV( 5
.VV5 6
MedicosVV6 =
.VV= >
	FindAsyncVV> G
(VVG H
idVVH J
)VVJ K
;VVK L
ifWW 
(WW 
medicoExistenteWW 
==WW  "
nullWW# '
)WW' (
returnWW) /
OkWW0 2
(WW2 3
$strWW3 H
)WWH I
;WWI J
varYY 
errorYY 
=YY 
ValidarMedicoYY %
(YY% &
medicoYY& ,
)YY, -
;YY- .
ifZZ 
(ZZ 
errorZZ 
!=ZZ 
$strZZ 
)ZZ 
{[[ 
return\\ 
Ok\\ 
(\\ 
error\\ 
)\\  
;\\  !
}]] 
var__ !
medicoConEspecialidad__ %
=__& '
await__( -
_appDbContext__. ;
.__; <
Medicos__< C
.__C D
FirstOrDefaultAsync__D W
(__W X
m__X Y
=>__Z \
m__] ^
.__^ _
Especialidad___ k
==__l n
medico__o u
.__u v
Especialidad	__v Ç
&&
__É Ö
m
__Ü á
.
__á à
Id
__à ä
!=
__ã ç
id
__é ê
)
__ê ë
;
__ë í
if`` 
(`` !
medicoConEspecialidad`` %
!=``& (
null``) -
)``- .
{aa 
returnbb 
Okbb 
(bb 
$strbb K
)bbK L
;bbL M
}cc 
medicoExistenteee 
.ee 
Nombreee "
=ee# $
medicoee% +
.ee+ ,
Nombreee, 2
;ee2 3
medicoExistenteff 
.ff 
Apellidoff $
=ff% &
medicoff' -
.ff- .
Apellidoff. 6
;ff6 7
medicoExistentegg 
.gg 
Especialidadgg (
=gg) *
medicogg+ 1
.gg1 2
Especialidadgg2 >
;gg> ?
_appDbContextii 
.ii 
Medicosii !
.ii! "
Updateii" (
(ii( )
medicoExistenteii) 8
)ii8 9
;ii9 :
awaitjj 
_appDbContextjj 
.jj  
SaveChangesAsyncjj  0
(jj0 1
)jj1 2
;jj2 3
returnll 
Okll 
(ll 
medicoExistentell %
)ll% &
;ll& '
}mm 	
[oo 	

HttpDeleteoo	 
(oo 
$stroo 
)oo 
]oo 
publicpp 
asyncpp 
Taskpp 
<pp 
IActionResultpp '
>pp' (
DeleteMedicopp) 5
(pp5 6
intpp6 9
idpp: <
)pp< =
{qq 	
varrr 
medicorr 
=rr 
awaitrr 
_appDbContextrr ,
.rr, -
Medicosrr- 4
.rr4 5
	FindAsyncrr5 >
(rr> ?
idrr? A
)rrA B
;rrB C
ifss 
(ss 
medicoss 
==ss 
nullss 
)ss 
returnss  &
Okss' )
(ss) *
$strss* ?
)ss? @
;ss@ A
_appDbContextuu 
.uu 
Medicosuu !
.uu! "
Removeuu" (
(uu( )
medicouu) /
)uu/ 0
;uu0 1
awaitvv 
_appDbContextvv 
.vv  
SaveChangesAsyncvv  0
(vv0 1
)vv1 2
;vv2 3
returnxx 
Okxx 
(xx 
newxx 
{xx 
messagexx #
=xx$ %
$"xx& (
$strxx( 6
{xx6 7
idxx7 9
}xx9 :
$strxx: Z
"xxZ [
}xx\ ]
)xx] ^
;xx^ _
}yy 	
}zz 
}{{ ø=
ãC:\Users\matia\OneDrive\Escritorio\Prueba_Conjunta\PruebaConjunta\Gestion PruebaFinal\GestionProyectos\Controllers\ConsultorioController.cs
	namespace 	
prueba
 
. 
Controllers 
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class !
ConsultorioController &
:' (
ControllerBase) 7
{		 
private

 
readonly

 
AppDBContext

 %
_appDbContext

& 3
;

3 4
public !
ConsultorioController $
($ %
AppDBContext% 1
appDbContext2 >
)> ?
{ 	
_appDbContext 
= 
appDbContext (
;( )
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
GetConsultorios) 8
(8 9
)9 :
{ 	
var 
consultorios 
= 
await $
_appDbContext% 2
.2 3
Consultorios3 ?
.? @
ToListAsync@ K
(K L
)L M
;M N
return 
Ok 
( 
consultorios "
)" #
;# $
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
async 
Task 
< 
IActionResult '
>' (
GetConsultorio) 7
(7 8
int8 ;
id< >
)> ?
{ 	
var 
consultorio 
= 
await #
_appDbContext$ 1
.1 2
Consultorios2 >
.> ?
	FindAsync? H
(H I
idI K
)K L
;L M
if 
( 
consultorio 
== 
null #
)# $
return% +
Ok, .
(. /
$str/ I
)I J
;J K
return 
Ok 
( 
consultorio !
)! "
;" #
}   	
["" 	
HttpPost""	 
]"" 
public## 
async## 
Task## 
<## 
IActionResult## '
>##' (
CreateConsultorio##) :
(##: ;
Consultorio##; F
consultorio##G R
)##R S
{$$ 	
var%% 
validationResult%%  
=%%! "
ValidarConsultorio%%# 5
(%%5 6
consultorio%%6 A
)%%A B
;%%B C
if&& 
(&& 
validationResult&&  
!=&&! #
null&&$ (
)&&( )
{'' 
return(( 
Ok(( 
((( 
validationResult(( *
)((* +
;((+ ,
})) 
_appDbContext++ 
.++ 
Consultorios++ &
.++& '
Add++' *
(++* +
consultorio+++ 6
)++6 7
;++7 8
await,, 
_appDbContext,, 
.,,  
SaveChangesAsync,,  0
(,,0 1
),,1 2
;,,2 3
return.. 
Ok.. 
(.. 
consultorio.. !
)..! "
;.." #
}// 	
[11 	
HttpPut11	 
(11 
$str11 
)11 
]11 
public22 
async22 
Task22 
<22 
IActionResult22 '
>22' (
EditConsultorio22) 8
(228 9
int229 <
id22= ?
,22? @
Consultorio22A L
consultorio22M X
)22X Y
{33 	
if44 
(44 
id44 
!=44 
consultorio44 !
.44! "
Id44" $
)44$ %
return44& ,
Ok44- /
(44/ 0
$str440 S
)44S T
;44T U
var66  
consultorioExistente66 $
=66% &
await66' ,
_appDbContext66- :
.66: ;
Consultorios66; G
.66G H
	FindAsync66H Q
(66Q R
id66R T
)66T U
;66U V
if77 
(77  
consultorioExistente77 $
==77% '
null77( ,
)77, -
return77. 4
Ok775 7
(777 8
$str778 R
)77R S
;77S T
var99 
validationResult99  
=99! "
ValidarConsultorio99# 5
(995 6
consultorio996 A
)99A B
;99B C
if:: 
(:: 
validationResult::  
!=::! #
null::$ (
)::( )
{;; 
return<< 
Ok<< 
(<< 
validationResult<< *
)<<* +
;<<+ ,
}==  
consultorioExistente??  
.??  !
Numero??! '
=??( )
consultorio??* 5
.??5 6
Numero??6 <
;??< = 
consultorioExistente@@  
.@@  !
Piso@@! %
=@@& '
consultorio@@( 3
.@@3 4
Piso@@4 8
;@@8 9
_appDbContextBB 
.BB 
ConsultoriosBB &
.BB& '
UpdateBB' -
(BB- . 
consultorioExistenteBB. B
)BBB C
;BBC D
awaitCC 
_appDbContextCC 
.CC  
SaveChangesAsyncCC  0
(CC0 1
)CC1 2
;CC2 3
returnEE 
OkEE 
(EE  
consultorioExistenteEE *
)EE* +
;EE+ ,
}FF 	
[HH 	

HttpDeleteHH	 
(HH 
$strHH 
)HH 
]HH 
publicII 
asyncII 
TaskII 
<II 
IActionResultII '
>II' (
DeleteConsultorioII) :
(II: ;
intII; >
idII? A
)IIA B
{JJ 	
varKK 
consultorioKK 
=KK 
awaitKK #
_appDbContextKK$ 1
.KK1 2
ConsultoriosKK2 >
.KK> ?
	FindAsyncKK? H
(KKH I
idKKI K
)KKK L
;KKL M
ifLL 
(LL 
consultorioLL 
==LL 
nullLL #
)LL# $
returnLL% +
OkLL, .
(LL. /
$strLL/ I
)LLI J
;LLJ K
_appDbContextNN 
.NN 
ConsultoriosNN &
.NN& '
RemoveNN' -
(NN- .
consultorioNN. 9
)NN9 :
;NN: ;
awaitOO 
_appDbContextOO 
.OO  
SaveChangesAsyncOO  0
(OO0 1
)OO1 2
;OO2 3
returnQQ 
OkQQ 
(QQ 
newQQ 
{QQ 
messageQQ #
=QQ$ %
$"QQ& (
$strQQ( ;
{QQ; <
idQQ< >
}QQ> ?
$strQQ? W
"QQW X
}QQY Z
)QQZ [
;QQ[ \
}RR 	
privateTT 
staticTT 
stringTT 
?TT 
ValidarConsultorioTT 1
(TT1 2
ConsultorioTT2 =
consultorioTT> I
)TTI J
{UU 	
ifVV 
(VV 
consultorioVV 
.VV 
NumeroVV "
<=VV# %
$numVV& '
)VV' (
{WW 
returnXX 
$strXX H
;XXH I
}YY 
if[[ 
([[ 
consultorio[[ 
.[[ 
Piso[[  
<=[[! #
$num[[$ %
)[[% &
{\\ 
return]] 
$str]] F
;]]F G
}^^ 
return`` 
null`` 
;`` 
}aa 	
}bb 
}cc Ê~
ÑC:\Users\matia\OneDrive\Escritorio\Prueba_Conjunta\PruebaConjunta\Gestion PruebaFinal\GestionProyectos\Controllers\CitaController.cs
	namespace 	
Prueba
 
. 
Controllers 
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public		 

class		 
CitasController		  
:		! "
ControllerBase		# 1
{

 
private 
readonly 
AppDBContext %
_appDbContext& 3
;3 4
public 
CitasController 
( 
AppDBContext +
appDbContext, 8
)8 9
{ 	
_appDbContext 
= 
appDbContext (
;( )
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
GetCitas) 1
(1 2
)2 3
{ 	
var 
citas 
= 
await 
_appDbContext +
.+ ,
Citas, 1
.+ ,
Include, 3
(3 4
c4 5
=>6 8
c9 :
.: ;
Paciente; C
)C D
.+ ,
Include, 3
(3 4
c4 5
=>6 8
c9 :
.: ;
Medico; A
)A B
.+ ,
Include, 3
(3 4
c4 5
=>6 8
c9 :
.: ;
Consultorio; F
)F G
.+ ,
ToListAsync, 7
(7 8
)8 9
;9 :
return 
Ok 
( 
citas 
) 
; 
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
async 
Task 
< 
IActionResult '
>' (
GetCita) 0
(0 1
int1 4
id5 7
)7 8
{ 	
var   
cita   
=   
await   
_appDbContext   *
.  * +
Citas  + 0
.!!* +
Include!!+ 2
(!!2 3
c!!3 4
=>!!5 7
c!!8 9
.!!9 :
Paciente!!: B
)!!B C
.""* +
Include""+ 2
(""2 3
c""3 4
=>""5 7
c""8 9
.""9 :
Medico"": @
)""@ A
.##* +
Include##+ 2
(##2 3
c##3 4
=>##5 7
c##8 9
.##9 :
Consultorio##: E
)##E F
.$$* +
FirstOrDefaultAsync$$+ >
($$> ?
c$$? @
=>$$A C
c$$D E
.$$E F
Id$$F H
==$$I K
id$$L N
)$$N O
;$$O P
if%% 
(%% 
cita%% 
==%% 
null%% 
)%% 
return%% $
Ok%%% '
(%%' (
$str%%( ;
)%%; <
;%%< =
return&& 
Ok&& 
(&& 
cita&& 
)&& 
;&& 
}'' 	
[)) 	
HttpPost))	 
])) 
public** 
async** 
Task** 
<** 
IActionResult** '
>**' (

CreateCita**) 3
(**3 4
[**4 5
FromBody**5 =
]**= >
Cita**? C
cita**D H
)**H I
{++ 	
var,, 
paciente,, 
=,, 
await,,  
_appDbContext,,! .
.,,. /
	Pacientes,,/ 8
.,,8 9
	FindAsync,,9 B
(,,B C
cita,,C G
.,,G H
Paciente,,H P
.,,P Q
Id,,Q S
),,S T
;,,T U
if-- 
(-- 
paciente-- 
==-- 
null--  
)--  !
return--" (
Ok--) +
(--+ ,
$str--, C
)--C D
;--D E
var// 
medico// 
=// 
await// 
_appDbContext// ,
.//, -
Medicos//- 4
.//4 5
	FindAsync//5 >
(//> ?
cita//? C
.//C D
Medico//D J
.//J K
Id//K M
)//M N
;//N O
if00 
(00 
medico00 
==00 
null00 
)00 
return00  &
Ok00' )
(00) *
$str00* ?
)00? @
;00@ A
var22 
consultorio22 
=22 
await22 #
_appDbContext22$ 1
.221 2
Consultorios222 >
.22> ?
	FindAsync22? H
(22H I
cita22I M
.22M N
Consultorio22N Y
.22Y Z
Id22Z \
)22\ ]
;22] ^
if33 
(33 
consultorio33 
==33 
null33 #
)33# $
return33% +
Ok33, .
(33. /
$str33/ I
)33I J
;33J K
cita66 
.66 
Paciente66 
=66 
paciente66 $
;66$ %
cita77 
.77 
Medico77 
=77 
medico77  
;77  !
cita88 
.88 
Consultorio88 
=88 
consultorio88 *
;88* +
var:: 
validationResult::  
=::! "
ValidarCita::# .
(::. /
cita::/ 3
)::3 4
;::4 5
if;; 
(;; 
!;; 
string;; 
.;; 
IsNullOrEmpty;; %
(;;% &
validationResult;;& 6
);;6 7
);;7 8
{<< 
return== 
Ok== 
(== 
validationResult== *
)==* +
;==+ ,
}>> 
_appDbContext@@ 
.@@ 
Citas@@ 
.@@  
Add@@  #
(@@# $
cita@@$ (
)@@( )
;@@) *
awaitAA 
_appDbContextAA 
.AA  
SaveChangesAsyncAA  0
(AA0 1
)AA1 2
;AA2 3
varCC 
citaConDetallesCC 
=CC  !
awaitCC" '
_appDbContextCC( 5
.CC5 6
CitasCC6 ;
.DD5 6
IncludeDD6 =
(DD= >
cDD> ?
=>DD@ B
cDDC D
.DDD E
PacienteDDE M
)DDM N
.EE5 6
IncludeEE6 =
(EE= >
cEE> ?
=>EE@ B
cEEC D
.EED E
MedicoEEE K
)EEK L
.FF5 6
IncludeFF6 =
(FF= >
cFF> ?
=>FF@ B
cFFC D
.FFD E
ConsultorioFFE P
)FFP Q
.GG5 6
FirstOrDefaultAsyncGG6 I
(GGI J
cGGJ K
=>GGL N
cGGO P
.GGP Q
IdGGQ S
==GGT V
citaGGW [
.GG[ \
IdGG\ ^
)GG^ _
;GG_ `
returnII 
OkII 
(II 
citaConDetallesII %
)II% &
;II& '
}JJ 	
[LL 	
HttpPutLL	 
(LL 
$strLL 
)LL 
]LL 
publicMM 
asyncMM 
TaskMM 
<MM 
IActionResultMM '
>MM' (
EditCitaMM) 1
(MM1 2
intMM2 5
idMM6 8
,MM8 9
[MM: ;
FromBodyMM; C
]MMC D
CitaMME I
citaMMJ N
)MMN O
{NN 	
ifOO 
(OO 
idOO 
!=OO 
citaOO 
.OO 
IdOO 
)OO 
returnOO %
OkOO& (
(OO( )
$strOO) G
)OOG H
;OOH I
varQQ 
citaExistenteQQ 
=QQ 
awaitQQ  %
_appDbContextQQ& 3
.QQ3 4
CitasQQ4 9
.RR3 4
IncludeRR4 ;
(RR; <
cRR< =
=>RR> @
cRRA B
.RRB C
PacienteRRC K
)RRK L
.SS3 4
IncludeSS4 ;
(SS; <
cSS< =
=>SS> @
cSSA B
.SSB C
MedicoSSC I
)SSI J
.TT3 4
IncludeTT4 ;
(TT; <
cTT< =
=>TT> @
cTTA B
.TTB C
ConsultorioTTC N
)TTN O
.UU3 4
FirstOrDefaultAsyncUU4 G
(UUG H
cUUH I
=>UUJ L
cUUM N
.UUN O
IdUUO Q
==UUR T
idUUU W
)UUW X
;UUX Y
ifVV 
(VV 
citaExistenteVV 
==VV  
nullVV! %
)VV% &
returnVV' -
OkVV. 0
(VV0 1
$strVV1 D
)VVD E
;VVE F
varXX 
pacienteXX 
=XX 
awaitXX  
_appDbContextXX! .
.XX. /
	PacientesXX/ 8
.XX8 9
	FindAsyncXX9 B
(XXB C
citaXXC G
.XXG H
PacienteXXH P
.XXP Q
IdXXQ S
)XXS T
;XXT U
ifYY 
(YY 
pacienteYY 
==YY 
nullYY  
)YY  !
returnYY" (
OkYY) +
(YY+ ,
$strYY, C
)YYC D
;YYD E
var[[ 
medico[[ 
=[[ 
await[[ 
_appDbContext[[ ,
.[[, -
Medicos[[- 4
.[[4 5
	FindAsync[[5 >
([[> ?
cita[[? C
.[[C D
Medico[[D J
.[[J K
Id[[K M
)[[M N
;[[N O
if\\ 
(\\ 
medico\\ 
==\\ 
null\\ 
)\\ 
return\\  &
Ok\\' )
(\\) *
$str\\* ?
)\\? @
;\\@ A
var^^ 
consultorio^^ 
=^^ 
await^^ #
_appDbContext^^$ 1
.^^1 2
Consultorios^^2 >
.^^> ?
	FindAsync^^? H
(^^H I
cita^^I M
.^^M N
Consultorio^^N Y
.^^Y Z
Id^^Z \
)^^\ ]
;^^] ^
if__ 
(__ 
consultorio__ 
==__ 
null__ #
)__# $
return__% +
Ok__, .
(__. /
$str__/ I
)__I J
;__J K
citaExistenteaa 
.aa 
Pacienteaa "
=aa# $
pacienteaa% -
;aa- .
citaExistentebb 
.bb 
Medicobb  
=bb! "
medicobb# )
;bb) *
citaExistentecc 
.cc 
Consultoriocc %
=cc& '
consultoriocc( 3
;cc3 4
citaExistentedd 
.dd 
Fechadd 
=dd  !
citadd" &
.dd& '
Fechadd' ,
;dd, -
citaExistenteee 
.ee 
Horaee 
=ee  
citaee! %
.ee% &
Horaee& *
;ee* +
vargg 
validationResultgg  
=gg! "
ValidarCitagg# .
(gg. /
citaExistentegg/ <
)gg< =
;gg= >
ifhh 
(hh 
!hh 
stringhh 
.hh 
IsNullOrEmptyhh %
(hh% &
validationResulthh& 6
)hh6 7
)hh7 8
{ii 
returnjj 
Okjj 
(jj 
validationResultjj *
)jj* +
;jj+ ,
}kk 
_appDbContextmm 
.mm 
Citasmm 
.mm  
Updatemm  &
(mm& '
citaExistentemm' 4
)mm4 5
;mm5 6
awaitnn 
_appDbContextnn 
.nn  
SaveChangesAsyncnn  0
(nn0 1
)nn1 2
;nn2 3
varpp 
citaConDetallespp 
=pp  !
awaitpp" '
_appDbContextpp( 5
.pp5 6
Citaspp6 ;
.qq5 6
Includeqq6 =
(qq= >
cqq> ?
=>qq@ B
cqqC D
.qqD E
PacienteqqE M
)qqM N
.rr5 6
Includerr6 =
(rr= >
crr> ?
=>rr@ B
crrC D
.rrD E
MedicorrE K
)rrK L
.ss5 6
Includess6 =
(ss= >
css> ?
=>ss@ B
cssC D
.ssD E
ConsultoriossE P
)ssP Q
.tt5 6
FirstOrDefaultAsynctt6 I
(ttI J
cttJ K
=>ttL N
cttO P
.ttP Q
IdttQ S
==ttT V
citaExistentettW d
.ttd e
Idtte g
)ttg h
;tth i
returnvv 
Okvv 
(vv 
citaConDetallesvv %
)vv% &
;vv& '
}ww 	
[yy 	

HttpDeleteyy	 
(yy 
$stryy 
)yy 
]yy 
publiczz 
asynczz 
Taskzz 
<zz 
IActionResultzz '
>zz' (

DeleteCitazz) 3
(zz3 4
intzz4 7
idzz8 :
)zz: ;
{{{ 	
var|| 
cita|| 
=|| 
await|| 
_appDbContext|| *
.||* +
Citas||+ 0
.||0 1
	FindAsync||1 :
(||: ;
id||; =
)||= >
;||> ?
if}} 
(}} 
cita}} 
==}} 
null}} 
)}} 
return}} $
Ok}}% '
(}}' (
$str}}( ;
)}}; <
;}}< =
_appDbContext 
. 
Citas 
.  
Remove  &
(& '
cita' +
)+ ,
;, -
await
ÄÄ 
_appDbContext
ÄÄ 
.
ÄÄ  
SaveChangesAsync
ÄÄ  0
(
ÄÄ0 1
)
ÄÄ1 2
;
ÄÄ2 3
return
ÅÅ 
Ok
ÅÅ 
(
ÅÅ 
new
ÅÅ 
{
ÅÅ 
message
ÅÅ #
=
ÅÅ$ %
$"
ÅÅ& (
$str
ÅÅ( 4
{
ÅÅ4 5
id
ÅÅ5 7
}
ÅÅ7 8
$str
ÅÅ8 X
"
ÅÅX Y
}
ÅÅZ [
)
ÅÅ[ \
;
ÅÅ\ ]
}
ÇÇ 	
private
ÑÑ 
string
ÑÑ 
?
ÑÑ 
ValidarCita
ÑÑ #
(
ÑÑ# $
Cita
ÑÑ$ (
cita
ÑÑ) -
)
ÑÑ- .
{
ÖÖ 	
if
ÜÜ 
(
ÜÜ 
cita
ÜÜ 
.
ÜÜ 
Fecha
ÜÜ 
==
ÜÜ 
default
ÜÜ %
)
ÜÜ% &
return
áá 
$str
áá 0
;
áá0 1
if
ââ 
(
ââ 
cita
ââ 
.
ââ 
Fecha
ââ 
<
ââ 
DateTime
ââ %
.
ââ% &
Now
ââ& )
.
ââ) *
Date
ââ* .
)
ââ. /
return
ää 
$str
ää I
;
ääI J
if
åå 
(
åå 
cita
åå 
.
åå 
Hora
åå 
==
åå 
default
åå $
)
åå$ %
return
çç 
$str
çç /
;
çç/ 0
if
èè 
(
èè 
cita
èè 
.
èè 
Hora
èè 
<
èè 
TimeSpan
èè $
.
èè$ %
	FromHours
èè% .
(
èè. /
$num
èè/ 0
)
èè0 1
||
èè2 4
cita
èè5 9
.
èè9 :
Hora
èè: >
>
èè? @
TimeSpan
èèA I
.
èèI J
	FromHours
èèJ S
(
èèS T
$num
èèT Y
)
èèY Z
)
èèZ [
return
êê 
$str
êê G
;
êêG H
if
íí 
(
íí 
cita
íí 
.
íí 
Paciente
íí 
==
íí  
null
íí! %
)
íí% &
return
ìì 
$str
ìì 3
;
ìì3 4
if
ïï 
(
ïï 
cita
ïï 
.
ïï 
Medico
ïï 
==
ïï 
null
ïï #
)
ïï# $
return
ññ 
$str
ññ 1
;
ññ1 2
if
òò 
(
òò 
cita
òò 
.
òò 
Consultorio
òò  
==
òò! #
null
òò$ (
)
òò( )
return
ôô 
$str
ôô 6
;
ôô6 7
return
õõ 
null
õõ 
;
õõ 
}
úú 	
}
ùù 
}ûû ¢-
vC:\Users\matia\OneDrive\Escritorio\Prueba_Conjunta\PruebaConjunta\Gestion PruebaFinal\GestionProyectos\AppDBContext.cs
	namespace 	
prueba
 
{ 
public 

class 
AppDBContext 
: 
	DbContext  )
{ 
public 
AppDBContext 
( 
DbContextOptions ,
<, -
AppDBContext- 9
>9 :
options; B
)B C
:D E
baseF J
(J K
optionsK R
)R S
{T U
}V W
public

 
DbSet

 
<

 
Paciente

 
>

 
	Pacientes

 (
{

) *
get

+ .
;

. /
set

0 3
;

3 4
}

5 6
public 
DbSet 
< 
Medico 
> 
Medicos $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
DbSet 
< 
Cita 
> 
Citas  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
DbSet 
< 
Consultorio  
>  !
Consultorios" .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
} 
public 
class 
Paciente 
{ 
public 
required 
int 
Id 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
required 
string 
Nombre %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
required 
string 
Apellido '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
[ 	
JsonRequired	 
] 
public 
DateTime &
FechaNacimiento' 6
{7 8
get9 <
;< =
set> A
;A B
}C D
public 
required 
string 
Email $
{% &
get' *
;* +
set, /
;/ 0
}1 2
} 
public 

class 
Medico 
{ 
public 
required 
int 
Id 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
required 
string 
Nombre %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
required 
string 
Apellido '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
required 
string 
Especialidad +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
} 
public 

class 
Consultorio 
{   
public!! 
required!! 
int!! 
Id!! 
{!!  
get!!! $
;!!$ %
set!!& )
;!!) *
}!!+ ,
public"" 
required"" 
int"" 
Numero"" "
{""# $
get""% (
;""( )
set""* -
;""- .
}""/ 0
public## 
required## 
int## 
Piso##  
{##! "
get### &
;##& '
set##( +
;##+ ,
}##- .
}$$ 
public&& 

class&& 
Cita&& 
{'' 
public(( 
required(( 
int(( 
Id(( 
{((  
get((! $
;(($ %
set((& )
;(() *
}((+ ,
public)) 
required)) 
int)) 

PacienteId)) &
{))' (
get))) ,
;)), -
set)). 1
;))1 2
}))3 4
public** 
required** 
Paciente**  
Paciente**! )
{*** +
get**, /
;**/ 0
set**1 4
;**4 5
}**6 7
=**8 9
null**: >
!**> ?
;**? @
public++ 
required++ 
int++ 
MedicoId++ $
{++% &
get++' *
;++* +
set++, /
;++/ 0
}++1 2
public,, 
required,, 
Medico,, 
Medico,, %
{,,& '
get,,( +
;,,+ ,
set,,- 0
;,,0 1
},,2 3
=,,4 5
null,,6 :
!,,: ;
;,,; <
[-- 	
JsonRequired--	 
]-- 
public-- 
DateTime-- &
Fecha--' ,
{--- .
get--/ 2
;--2 3
set--4 7
;--7 8
}--9 :
[.. 	
JsonRequired..	 
].. 
public.. 
TimeSpan.. &
Hora..' +
{.., -
get... 1
;..1 2
set..3 6
;..6 7
}..8 9
public// 
required// 
int// 
ConsultorioId// )
{//* +
get//, /
;/// 0
set//1 4
;//4 5
}//6 7
public00 
required00 
Consultorio00 #
Consultorio00$ /
{000 1
get002 5
;005 6
set007 :
;00: ;
}00< =
=00> ?
null00@ D
!00D E
;00E F
}11 
}44 